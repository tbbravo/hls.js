!function(e,t,i){"use strict";var r,s,n,a,o,u,d,h,f,l,c,p=0,g=videojs.EventTarget,m="blob:vjs-media-source/";d=e.WebKitDataCue||e.VTTCue,h=function(e){Object.defineProperties(e.frame,{id:{get:function(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},f=function(e,t,i){var r,s;if(i)for(r=i.cues.length;r--;)s=i.cues[r],s.startTime<=t&&s.endTime>=e&&i.removeCue(s)},l=function(e,t,i){i.captions&&i.captions.length&&!e.inbandTextTrack_&&(e.inbandTextTrack_=t.player_.addTextTrack("captions")),i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=t.player_.addTextTrack("metadata","Timed Metadata"),e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)},c=function(e,t,i){t&&t.forEach(function(e){this.inbandTextTrack_.addCue(new VTTCue(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),i&&i.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var i=new d(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,h(i),this.metadataTrack_.addCue(i)},this)},e)},r={mode:"auto"},videojs.MediaSource=videojs.extend(g,{constructor:function(t){var i;return this.settings_=videojs.mergeOptions(r,t),"auto"===this.settings_.mode&&videojs.MediaSource.supportsNativeMediaSources()||"html5"===this.settings_.mode?(i=new e.MediaSource,n(i),i.addEventListener("sourceopen",function(){var e=document.querySelector('[src="'+i.url_+'"]');(e||!e.parentNode)&&(i.player_=videojs(e.parentNode))}),i):new videojs.FlashMediaSource}}),videojs.MediaSource.supportsNativeMediaSources=function(){return!!e.MediaSource},n=function(e){e.virtualBuffers=[],e.addSourceBuffer_=e.addSourceBuffer,e.addSourceBuffer=a},a=function(e){var t,i;return/^video\/mp2t/i.test(e)?(i=e.split(";").slice(1).join(";"),i=i.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){var r=("00"+Number(t).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+r+"00"+s}),t=new s(this,i),this.virtualBuffers.push(t),t):this.addSourceBuffer_(e)},o=function(e,t,i){return function(){return e[t]&&e[t].updating?void 0:e.trigger(i)}},s=videojs.extend(g,{constructor:function(e,t){var i=this;this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.transmuxer_=new Worker(videojs.MediaSource.webWorkerURI||"./dist/transmuxer_worker.js"),this.transmuxer_.onmessage=function(r){if("data"===r.data.action){var s=r.data.segment;return s.data=new Uint8Array(s.data),"video"===s.type?i.videoBuffer_||(i.videoBuffer_=e.addSourceBuffer_("video/mp4;"+(t||"codecs=avc1.4d400d")),i.videoBuffer_.timestampOffset=i.timestampOffset_,i.videoBuffer_.addEventListener("updatestart",o(i,"audioBuffer_","updatestart")),i.videoBuffer_.addEventListener("update",o(i,"audioBuffer_","update")),i.videoBuffer_.addEventListener("updateend",o(i,"audioBuffer_","updateend"))):"audio"===s.type?i.audioBuffer_||(i.audioBuffer_=e.addSourceBuffer_("audio/mp4;"+(t||"codecs=mp4a.40.2")),i.audioBuffer_.timestampOffset=i.timestampOffset_,i.audioBuffer_.addEventListener("updatestart",o(i,"videoBuffer_","updatestart")),i.audioBuffer_.addEventListener("update",o(i,"videoBuffer_","update")),i.audioBuffer_.addEventListener("updateend",o(i,"videoBuffer_","updateend"))):"combined"===s.type&&(i.videoBuffer_||(i.videoBuffer_=e.addSourceBuffer_("video/mp4;"+(t||"codecs=avc1.4d400d, mp4a.40.2")),i.videoBuffer_.timestampOffset=i.timestampOffset_,i.videoBuffer_.addEventListener("updatestart",o(i,"videoBuffer_","updatestart")),i.videoBuffer_.addEventListener("update",o(i,"videoBuffer_","update")),i.videoBuffer_.addEventListener("updateend",o(i,"videoBuffer_","updateend")))),l(i,e,s),void i.pendingBuffers_.push(s)}return"done"===r.data.action?void i.processPendingSegments_():void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.videoBuffer_&&(this.videoBuffer_.timestampOffset=e),this.audioBuffer_&&(this.audioBuffer_.timestampOffset=e),this.transmuxer_.postMessage({action:"resetTransmuxer"}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return this.bufferUpdating_||this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,i=0,r=[],s=[];if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return videojs.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;for(var n=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,o=n.length;o--;)r.push({time:n.start(o),type:"start"}),r.push({time:n.end(o),type:"end"});for(o=a.length;o--;)r.push({time:a.start(o),type:"start"}),r.push({time:a.end(o),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),o=0;o<r.length;o++)"start"===r[o].type?(i++,2===i&&(e=r[o].time)):"end"===r[o].type&&(i--,1===i&&(t=r[o].time)),null!==e&&null!==t&&(s.push([e,t]),e=null,t=null);return videojs.createTimeRanges(s)}})},appendBuffer:function(e){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:e.buffer},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})},remove:function(e,t){this.videoBuffer_&&this.videoBuffer_.remove(e,t),this.audioBuffer_&&this.audioBuffer_.remove(e,t),f(e,t,this.metadataTrack_),f(e,t,this.inbandTextTrack_)},processPendingSegments_:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,r=t.data;return"combined"===i&&(i="video"),e[i].segments.push(r),e[i].bytes+=r.byteLength,t.captions&&(e.captions=e.captions.concat(t.captions)),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),c(this,e.captions,e.metadata),this.concatAndAppendSegments_(e.video,this.videoBuffer_),this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1},concatAndAppendSegments_:function(e,t){var i,r=0;e.bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,r),r+=e.byteLength}),t.appendBuffer(i))},abort:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"resetTransmuxer"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}),videojs.FlashMediaSource=videojs.extend(g,{constructor:function(){var e=this;this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){this.swfObj=document.getElementById(t.swfId),this.player_=videojs(this.swfObj.parentNode),this.tech_=this.swfObj.tech,this.readyState="open",this.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),this.swfObj&&this.swfObj.vjs_load()})}}),videojs.FlashMediaSource.TIME_BETWEEN_TICKS=Math.floor(1e3/480),videojs.FlashMediaSource.TIME_PER_TICK=Math.floor(1e3/240),videojs.FlashMediaSource.BYTES_PER_CHUNK=1024,videojs.FlashMediaSource.MIN_CHUNK=1024,videojs.FlashMediaSource.MAX_CHUNK=1048576,videojs.FlashMediaSource.prototype.addSourceBuffer=function(e){var t;if(0!==e.indexOf("video/mp2t"))throw new Error("NotSupportedError (Video.js)");return t=new videojs.FlashSourceBuffer(this),this.sourceBuffers.push(t),t};try{Object.defineProperty(videojs.FlashMediaSource.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(e){return this.swfObj.vjs_setProperty("duration",e),e}})}catch(y){videojs.FlashMediaSource.prototype.duration=NaN}videojs.FlashMediaSource.prototype.endOfStream=function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),this.readyState="ended"},videojs.mediaSources={},videojs.MediaSource.open=function(e,t){var i=videojs.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},u=function(t){e.setTimeout(t,videojs.FlashMediaSource.TIME_BETWEEN_TICKS)},videojs.FlashSourceBuffer=videojs.extend(g,{constructor:function(i){var r,s=this;this.chunkSize_=videojs.FlashMediaSource.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource=i,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new t.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),r=e.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource.swfObj.vjs_appendBuffer(r),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.segmentParser_=new t.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){return videojs.createTimeRanges(this.mediaSource.swfObj.vjs_getProperty("buffered"))}}),this.mediaSource.player_.on("seeked",function(){f(0,1/0,s.metadataTrack_),f(0,1/0,s.inbandTextTrack_)})},appendBuffer:function(e){var t,i=this;if(this.updating)throw t=new Error("SourceBuffer.append() cannot be called while an update is in progress"),t.name="InvalidStateError",t.code=11,t;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"});var r=524288,s=0;!function n(){i.segmentParser_.push(e.subarray(s,s+r)),s+=r,u(s<e.byteLength?n:i.segmentParser_.flush.bind(i.segmentParser_))}()},abort:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))},remove:function(){f(0,1/0,this.metadataTrack_),f(0,1/0,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})},receiveBuffer_:function(e){var t=this;l(this,this.mediaSource,e),c(this,e.captions,e.metadata),u(function(){0===t.buffer_.length&&u(t.processBuffer_.bind(t));var i=t.convertTagsToData_(e);i&&(t.buffer_.push(i),t.bufferSize_+=i.byteLength)})},processBuffer_:function(){var t,i,r,s,n,a,o=0,d=0,h=+new Date;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));do{for(d++,t=this.buffer_[0].subarray(o,o+this.chunkSize_),t.byteLength<this.chunkSize_||this.buffer_[0].byteLength===o+this.chunkSize_?(o=0,this.buffer_.shift()):o+=this.chunkSize_,this.bufferSize_-=t.byteLength,s="",r=t.byteLength,i=0;r>i;i++)s+=String.fromCharCode(t[i]);n=e.btoa(s),this.mediaSource.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+n+"</string></arguments></invoke>"),a=new Date-h}while(this.buffer_.length&&a<videojs.FlashMediaSource.TIME_PER_TICK);this.buffer_.length&&o&&(this.buffer_[0]=this.buffer_[0].subarray(o)),a>=videojs.FlashMediaSource.TIME_PER_TICK&&(this.chunkSize_=Math.floor(this.chunkSize_*(d/4))),this.chunkSize_=Math.max(videojs.FlashMediaSource.MIN_CHUNK,Math.min(this.chunkSize_,videojs.FlashMediaSource.MAX_CHUNK)),0!==this.bufferSize_?u(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}),"ended"===this.mediaSource.readyState&&this.mediaSource.swfObj.vjs_endOfStream())},convertTagsToData_:function(e){var t,i,r,s,n=0,a=this.mediaSource.tech_,o=0,u=this.getOrderedTags_(e);if(isNaN(this.basePtsOffset_)&&u.length&&(this.basePtsOffset_=u[0].pts),a.seeking())for(s=a.currentTime()-this.timestampOffset,s*=1e3,s+=this.basePtsOffset_;o<u.length&&u[o].pts<s;)o++;if(!(o>=u.length)){for(t=o;t<u.length;t++)n+=u[t].bytes.byteLength;for(r=new Uint8Array(n),t=o,i=0;t<u.length;t++)r.set(u[t].bytes,i),i+=u[t].bytes.byteLength;return r}},getOrderedTags_:function(e){for(var t,i=e.tags.videoTags,r=e.tags.audioTags,s=[];i.length||r.length;)t=i.length?r.length&&r[0].dts<i[0].dts?r.shift():i.shift():r.shift(),s.push(t.finalize());return s}}),videojs.URL={createObjectURL:function(t){var i;return t instanceof videojs.FlashMediaSource?(i=m+p,p++,videojs.mediaSources[i]=t,i):(i=e.URL.createObjectURL(t),t.url_=i,i)}}}(this,this.muxjs),function(e,t,i,r){"use strict";var s,n,a=1.1,o=t.getComponent("Component"),u=500;s=function(e){return e.retries&&e.retries>=2},t.Hls=t.extend(o,{constructor:function(e,i){var r,s=this;o.call(this,e),e.options_&&e.options_.playerId&&(r=t(e.options_.playerId),r.hls||Object.defineProperty(r,"hls",{get:function(){return t.log.warn("player.hls is deprecated. Use player.tech.hls instead."),s}})),this.tech_=e,this.source_=i.source,this.mode_=i.mode,this.pendingSegment_=null,this.bytesReceived=0,this.loadingState_="none","none"!==this.tech_.preload()&&(this.loadingState_="meta"),this.startCheckingBuffer_(),this.on(this.tech_,"seeking",function(){this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){console.log("error stop"),this.stopCheckingBuffer_()}),this.on(this.tech_,"play",this.play)}}),t.Hls.canPlaySource=function(){return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},t.HlsSourceHandler=function(e){return{canHandleSource:function(e){var i=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t.Hls.supportsNativeHls?!1:i.test(e.type)},handleSource:function(i,r){return"flash"===e&&r.setTimeout(function(){r.trigger("loadstart")},1),r.hls=new t.Hls(r,{source:i,mode:e}),r.hls.src(i.src),r.hls}}},t.MediaSource.supportsNativeMediaSources()&&t.getComponent("Html5").registerSourceHandler(t.HlsSourceHandler("html5")),t.getComponent("Flash").registerSourceHandler(t.HlsSourceHandler("flash")),t.Hls.GOAL_BUFFER_LENGTH=30,t.Hls.prototype.src=function(e){var i;e&&(this.mediaSource=new t.MediaSource({mode:this.mode_}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen.bind(this)),this.options_={},this.source_.withCredentials!==r?this.options_.withCredentials=this.source_.withCredentials:t.options.hls&&(this.options_.withCredentials=t.options.hls.withCredentials),this.playlists=new t.Hls.PlaylistLoader(this.source_.src,this.options_.withCredentials),this.playlists.on("loadedmetadata",function(){i=this.playlists.media(),i.endList&&"metadata"!==this.tech_.preload()&&"none"!==this.tech_.preload()&&(this.loadingState_="segments"),this.setupSourceBuffer_(),this.setupFirstPlay(),this.fillBuffer(),this.tech_.trigger("loadedmetadata")}.bind(this)),this.playlists.on("error",function(){console.log("this.playlists.on("),2===this.playlists.error.code?this.mediaSource.endOfStream("network"):4===this.playlists.error.code&&this.mediaSource.endOfStream("decode"),this.tech_.error(this.playlists.error)}.bind(this)),this.playlists.on("loadedplaylist",function(){var e=this.playlists.media();return e?(this.updateDuration(this.playlists.media()),void(i=e)):void this.playlists.media(this.selectPlaylist())}.bind(this)),this.playlists.on("mediachange",function(){this.tech_.trigger({type:"mediachange",bubbles:!0})}.bind(this)),this.tech_.el()&&this.tech_.src(t.URL.createObjectURL(this.mediaSource)))},t.Hls.prototype.handleSourceOpen=function(){this.sourceBuffer||this.setupSourceBuffer_(),this.tech_.autoplay()&&this.play()},t.Hls.bufferedAdditions_=function(e,t){var i,s,n=[],a=[];if(!e||!t)return n;for(i=0;i<e.length;i++)a.push({original:!0,start:e.start(i)}),a.push({original:!0,end:e.end(i)});for(i=0;i<t.length;i++)a.push({start:t.start(i)}),a.push({end:t.end(i)});for(a.sort(function(e,t){var i,s;return i=e.start!==r?e.start:e.end,s=t.start!==r?t.start:t.end,i===s?e.original?e.start!==r?-1:1:t.start!==r?-1:1:i-s}),s=!1,i=0;i<a.length;i++)a[i].original?s=a[i].start!==r:s||n.push(a[i]);return n},t.Hls.prototype.setupSourceBuffer_=function(){var e,i=this.playlists.media();i&&"open"===this.mediaSource.readyState&&(e="video/mp2t",i.attributes&&i.attributes.CODECS&&(e+='; codecs="'+i.attributes.CODECS+'"'),this.sourceBuffer=this.mediaSource.addSourceBuffer(e),this.sourceBuffer.addEventListener("updateend",function(){var e,i,s,n=this.pendingSegment_;this.pendingSegment_=null,i=this.findCurrentBuffered_(),i.length&&this.duration()===i.end(0)&&this.mediaSource.endOfStream(),n&&(e=n.playlist.segments[n.mediaIndex],s=t.Hls.bufferedAdditions_(n.buffered,this.tech_.buffered()),s.forEach(function(t){t.start!==r&&(e.start=t.start),t.end!==r&&(e.end=t.end)}),s.length&&this.updateDuration(n.playlist),this.checkBuffer_())}.bind(this)))},t.Hls.prototype.setupFirstPlay=function(){var e,t;t=this.playlists.media(),this.duration()===1/0&&0===this.tech_.played().length&&!this.tech_.paused()&&this.sourceBuffer&&t&&(e=this.seekable(),e.length&&this.tech_.setCurrentTime(e.end(0)))},t.Hls.prototype.play=function(){return this.loadingState_="segments",this.tech_.ended()&&this.tech_.setCurrentTime(0),0===this.tech_.played().length?this.setupFirstPlay():void(this.duration()===1/0&&this.tech_.currentTime()<this.tech_.seekable().start(0)&&this.tech_.setCurrentTime(this.tech_.seekable().start(0)))},t.Hls.prototype.setCurrentTime=function(e){var t=this.findCurrentBuffered_();return this.playlists&&this.playlists.media()&&this.playlists.media().segments?t&&t.length?e:(this.cancelSegmentXhr(),this.keyXhr_&&(this.keyXhr_.aborted=!0,this.cancelKeyXhr()),this.pendingSegment_=null,void this.fillBuffer(e)):0},t.Hls.prototype.duration=function(){var e=this.playlists;return e?t.Hls.Playlist.duration(e.media()):0},t.Hls.prototype.seekable=function(){var e;return this.playlists?(e=this.playlists.media(),e?t.Hls.Playlist.seekable(e):t.createTimeRanges()):t.createTimeRanges()},t.Hls.prototype.updateDuration=function(e){var i=this.mediaSource.duration,r=t.Hls.Playlist.duration(e),s=function(){this.mediaSource.duration=r,this.tech_.trigger("durationchange"),this.mediaSource.removeEventListener("sourceopen",s)}.bind(this);i!==r&&("open"===this.mediaSource.readyState?(this.mediaSource.duration=r,this.tech_.trigger("durationchange")):this.mediaSource.addEventListener("sourceopen",s))},t.Hls.prototype.resetSrc_=function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&this.sourceBuffer.abort()},t.Hls.prototype.cancelKeyXhr=function(){this.keyXhr_&&(this.keyXhr_.onreadystatechange=null,this.keyXhr_.abort(),this.keyXhr_=null)},t.Hls.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null)},t.Hls.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),o.prototype.dispose.call(this)},t.Hls.prototype.selectPlaylist=function(){var e,i,r,s,n,o,u,d,h=this.playlists.master.playlists.slice(),f=[],l=h.length;for(h.sort(t.Hls.comparePlaylistBandwidth);l--;)i=h[l],i.attributes&&i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH*a,e<this.bandwidth&&(f.push(i),s||(s=i)));for(l=f.length,f.sort(t.Hls.comparePlaylistResolution),i=null,u=parseInt(getComputedStyle(this.tech_.el()).width,10),d=parseInt(getComputedStyle(this.tech_.el()).height,10);l--;)if(r=i,i=f[l],i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&i.attributes.RESOLUTION.height){if(i.attributes.RESOLUTION.width===u&&i.attributes.RESOLUTION.height===d){n=null,o=i;break}if(i.attributes.RESOLUTION.width<u&&i.attributes.RESOLUTION.height<d){r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&r.attributes.RESOLUTION.height&&(n=r),o=i;break}}return n||o||s||h[0]},t.Hls.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=e.setTimeout(this.checkBuffer_.bind(this),u)},t.Hls.prototype.startCheckingBuffer_=function(){this.tech_.on("waiting",this.drainBuffer.bind(this)),this.checkBuffer_()},t.Hls.prototype.stopCheckingBuffer_=function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.tech_.off("waiting",this.drainBuffer)},t.Hls.prototype.findCurrentBuffered_=function(){var e,i,r=this.tech_,s=r.currentTime(),n=this.tech_.buffered(),a=t(r.options_.playerId);if(n&&n.length)for(i=0;i<n.length;i++)if(s=Math.ceil(10*s)/10,1===n.length,i>0&&s>=n.end(i-1)&&s<n.start(i)&&this.tech_.setCurrentTime(n.start(i)),1===n.length&&s<n.start(i)&&this.tech_.setCurrentTime(n.start(i)),n.start(i)<=s&&n.end(i)>s)return e=t.createTimeRanges(n.start(i),n.end(i)),e.indexOf=i,a.removeClass("vjs-waiting"),e;return a.hasStarted()&&a.handleTechWaiting_(),e=t.createTimeRanges(),e.indexOf=-1,e},t.Hls.prototype.fillBuffer=function(e){var i,s,n=this.tech_,a=(n.currentTime(),this.findCurrentBuffered_(),0),o=0;if("segments"===this.loadingState_&&n.currentSrc()&&this.playlists&&!this.segmentXhr_&&!this.pendingSegment_&&"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&"SWITCHING_MEDIA"!==this.playlists.state){if(this.lastMediaIndex===r?this.lastMediaIndex=0:this.lastMediaIndex++,o=this.lastMediaIndex,console.log("mediaindex",o),i=this.playlists.media().segments[o],!i)return void this.lastMediaIndex--;if(this.lastLoadSegmentUrl)for(;this.lastLoadSegmentUrl.indexOf(i.uri.split(".ts")[0])>=0&&(o++,o<this.playlists.media().segments.length);)i=this.playlists.media().segments[o];"number"!=typeof e&&a>=t.Hls.GOAL_BUFFER_LENGTH||(s={uri:this.playlistUriToUrl(i.uri),mediaIndex:o,playlist:this.playlists.media(),offset:e,bytes:null,encryptedBytes:null,decrypter:null,buffered:null},this.loadSegment(s))}},t.Hls.prototype.playlistUriToUrl=function(e){var t;return t=this.playlists.media().uri===this.source_.src?n(this.source_.src,e):n(n(this.source_.src,this.playlists.media().uri||""),e)},t.Hls.prototype.setBandwidth=function(e){this.segmentXhrTime=e.roundTripTime,this.bandwidth=e.bandwidth,this.bytesReceived+=e.bytesReceived||0,this.tech_.trigger("bandwidthupdate")},t.Hls.prototype.loadSegment=function(e){var i=e.uri.split(".ts")[0];if(this.lastLoadSegmentUrl===r)this.lastLoadSegmentUrl=[i];else if(this.lastLoadSegmentUrl.indexOf(i)>=0)return;this.lastLoadSegmentUrl.push(i);var s=this,n=e.playlist.segments[e.mediaIndex];n.key&&this.fetchKey_(n),this.segmentXhr_=t.Hls.xhr({uri:e.uri,responseType:"arraybuffer",withCredentials:this.source_.withCredentials},function(t,i){return s.segmentXhr_=null,i.timedout?(s.bandwidth=1,s.playlists.media(s.selectPlaylist())):!i.aborted&&t?(s.error={status:i.status,message:"HLS segment request error at URL: "+e.uri,code:i.status>=500?4:2},s.mediaSource.endOfStream("network")):void(i.response&&(s.setBandwidth(i),n.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),s.pendingSegment_=e,s.tech_.trigger("progress"),s.drainBuffer(),s.playlists.media(s.selectPlaylist())))})},t.Hls.prototype.drainBuffer=function(e){var i,r,n,a,o,u,d,h,f=0,l=0!==this.tech_.buffered().length,c=this.findCurrentBuffered_(),p=!(c&&c.length);if(this.pendingSegment_&&this.sourceBuffer&&!this.sourceBuffer.updating){if(i=this.pendingSegment_,r=i.mediaIndex,n=i.playlist,a=i.offset,o=i.bytes,u=n.segments[r],u.key&&!o)return s(u.key)?(t.log.warn('Network error retrieving key from "'+u.key.uri+'"'),this.mediaSource.endOfStream("network")):u.key.bytes?i.decrypter?void 0:(h=u.key.iv||new Uint32Array([0,0,0,r+n.mediaSequence]),d=new t.Hls.Decrypter(i.encryptedBytes,u.key.bytes,h,function(e,t){i.bytes=t}),void(i.decrypter=d)):void 0;if(e=e||{},this.tech_.seeking()&&p){if(l)return void this.sourceBuffer.remove(0,1/0);i.playlist.discontinuityStarts.length&&(i.mediaIndex>0&&(f=t.Hls.Playlist.duration(i.playlist,i.mediaIndex)),this.sourceBuffer.timestampOffset=f)}else u.discontinuity&&this.setCurrentTime(0);if(c.length)try{this.sourceBuffer.appendWindowStart=Math.min(this.tech_.currentTime(),c.end(0))}catch(g){this.sourceBuffer.appendWindowStart=0}else this.sourceBuffer.appendWindowStart=0;this.pendingSegment_&&(this.pendingSegment_.buffered=this.tech_.buffered()),console.log("bytes",o.length),this.sourceBuffer.appendBuffer(o)}},t.Hls.prototype.fetchKey_=function(e){var i,r,n,a;if(!this.keyXhr_&&(r=this,n=this.options_,a=function(t){return function(i,s){var n;return r.keyXhr_=null,i||!s.response||16!==s.response.byteLength?(t.retries=t.retries||0,t.retries++,void(s.aborted||r.fetchKey_(e))):(n=new DataView(s.response),t.bytes=new Uint32Array([n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12)]),void r.checkBuffer_())}},i=e.key))return i.bytes||s(i)?void 0:void(this.keyXhr_=t.Hls.xhr({uri:this.playlistUriToUrl(i.uri),responseType:"arraybuffer",withCredentials:n.withCredentials},a(i)))},t.Hls.supportsNativeHls=function(){var e,r,s=i.createElement("video");return t.getComponent("Html5").isSupported()?(e=s.canPlayType("application/x-mpegURL"),r=s.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(e)||/probably|maybe/.test(r)):!1}(),t.Hls.isSupported=function(){return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},t.Hls.comparePlaylistBandwidth=function(t,i){var r,s;return t.attributes&&t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||e.Number.MAX_VALUE,i.attributes&&i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),s=s||e.Number.MAX_VALUE,r-s},t.Hls.comparePlaylistResolution=function(t,i){var r,s;return t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||e.Number.MAX_VALUE,i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),s=s||e.Number.MAX_VALUE,r===s&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-s},n=t.Hls.resolveUrl=function(e,t){var r,s,n=i.querySelector("base"),a=i.querySelector("head"),o=i.createElement("a"),u=n;return n?r=n.href:u=a.appendChild(i.createElement("base")),u.href=e,o.href=t,s=o.href,n?n.href=r:a.removeChild(u),s}}(window,window.videojs,document),function(e){"use strict";e.Hls.xhr=function(t,i){t=e.mergeOptions({timeout:45e3},t);var r=e.xhr(t,function(e,t){!e&&r.response&&(r.responseTime=(new Date).getTime(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=r.response.byteLength||r.response.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),e||r.timedout?r.timedout=r.timedout||"ETIMEDOUT"===e.code:r.timedout=!1,e||200===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(r.response||r.responseText)))),i(e,r)});return r.requestTime=(new Date).getTime(),r}}(window.videojs),function(e,t){var i=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},this.off=function(t,i){var r;return e[t]?(r=e[t].indexOf(i),e[t].splice(r,1),r>-1):!1},this.trigger=function(t){var i,r,s,n;if(i=e[t])if(2===arguments.length)for(s=i.length,r=0;s>r;++r)i[r].call(this,arguments[1]);else for(n=Array.prototype.slice.call(arguments,1),s=i.length,r=0;s>r;++r)i[r].apply(this,n)},this.dispose=function(){e={}}}};i.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e.Hls.Stream=i}(window.videojs),function(e,t,i,r,s){var n,a,o,u=function(){},d=function(){var e="[^=]*",t='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")}(),h=function(e){for(var t,i=e.split(d),r=i.length,s={};r--;)""!==i[r]&&(t=/([^=]*)=(.*)/.exec(i[r]).slice(1),t[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),s[t[0]]=t[1]);return s},f=e.Hls.Stream;n=function(){var e="";n.prototype.init.call(this),this.push=function(t){var i;for(e+=t,i=e.indexOf("\n");i>-1;i=e.indexOf("\n"))this.trigger("data",e.substring(0,i)),e=e.substring(i+1)}},n.prototype=new f,a=function(){a.prototype.init.call(this)},a.prototype=new f,a.prototype.push=function(e){var i,r;return e=e.replace(/^\s+|\s+$/g,""),0!==e.length?"#"!==e[0]?void this.trigger("data",{type:"uri",uri:e}):0!==e.indexOf("#EXT")?void this.trigger("data",{type:"comment",text:e.slice(1)}):(e=e.replace("\r",""),(i=/^#EXTM3U/.exec(e))?void this.trigger("data",{type:"tag",tagType:"m3u"}):(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))?(r={type:"tag",tagType:"inf"},i[1]&&(r.duration=parseFloat(i[1])),i[2]&&(r.title=i[2]),void this.trigger("data",r)):(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"targetduration"},i[1]&&(r.duration=t(i[1],10)),void this.trigger("data",r)):(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"totalduration"},i[1]&&(r.duration=t(i[1],10)),void this.trigger("data",r)):(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"version"},i[1]&&(r.version=t(i[1],10)),void this.trigger("data",r)):(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"media-sequence"},i[1]&&(r.number=t(i[1],10)),void this.trigger("data",r)):(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(r.number=t(i[1],10)),void this.trigger("data",r)):(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))?(r={type:"tag",tagType:"playlist-type"},i[1]&&(r.playlistType=i[1]),void this.trigger("data",r)):(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))?(r={type:"tag",tagType:"byterange"},i[1]&&(r.length=t(i[1],10)),i[2]&&(r.offset=t(i[2],10)),void this.trigger("data",r)):(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))?(r={type:"tag",tagType:"allow-cache"},i[1]&&(r.allowed=!/NO/.test(i[1])),void this.trigger("data",r)):(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))?(r={type:"tag",tagType:"stream-inf"},i[1]&&(r.attributes=h(i[1]),r.attributes.RESOLUTION&&!function(){var e=r.attributes.RESOLUTION.split("x"),i={};e[0]&&(i.width=t(e[0],10)),e[1]&&(i.height=t(e[1],10)),r.attributes.RESOLUTION=i}(),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=t(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=t(r.attributes["PROGRAM-ID"],10))),void this.trigger("data",r)):(i=/^#EXT-X-ENDLIST/.exec(e))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(i=/^#EXT-X-DISCONTINUITY/.exec(e))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(i=/^#EXT-X-KEY:?(.*)$/.exec(e))?(r={type:"tag",tagType:"key"},i[1]&&(r.attributes=h(i[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2)&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=t(r.attributes.IV[0],16),r.attributes.IV[1]=t(r.attributes.IV[1],16),r.attributes.IV[2]=t(r.attributes.IV[2],16),r.attributes.IV[3]=t(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r)):void this.trigger("data",{type:"tag",data:e.slice(4,e.length)})):void 0},o=function(){var e,t=this,d=[],h={};o.prototype.init.call(this),this.lineStream=new n,this.parseStream=new a,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(n){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=n.allowed,"allowed"in n||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in n&&(h.byterange=e,e.length=n.length,"offset"in n||(this.trigger("info",{message:"defaulting offset to zero"}),n.offset=0)),"offset"in n&&(h.byterange=e,e.offset=n.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,
this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),n.duration>=0&&(h.duration=n.duration),this.manifest.segments=d},key:function(){return n.attributes?"NONE"===n.attributes.METHOD?void(e=null):n.attributes.URI?(n.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),e={method:n.attributes.METHOD||"AES-128",uri:n.attributes.URI},void(n.attributes.IV!==s&&(e.iv=n.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return i(n.number)?void(this.manifest.mediaSequence=n.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+n.number})},"discontinuity-sequence":function(){return i(n.number)?void(this.manifest.discontinuitySequence=n.number):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+n.number})},"playlist-type":function(){return/VOD|EVENT/.test(n.playlistType)?void(this.manifest.playlistType=n.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+n.playlist})},"stream-inf":function(){return this.manifest.playlists=d,n.attributes?(h.attributes||(h.attributes={}),void(h.attributes=r(h.attributes,n.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){h.discontinuity=!0,this.manifest.discontinuityStarts.push(d.length)},targetduration:function(){return!i(n.duration)||n.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+n.duration}):void(this.manifest.targetDuration=n.duration)},totalduration:function(){return!i(n.duration)||n.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+n.duration}):void(this.manifest.totalDuration=n.duration)}})[n.tagType]||u).call(t)},uri:function(){h.uri=n.uri,d.push(h),!this.manifest.targetDuration||"duration"in h||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),e&&(h.key=e),h={}},comment:function(){}})[n.type].call(t)})},o.prototype=new f,o.prototype.push=function(e){this.lineStream.push(e)},o.prototype.end=function(){this.lineStream.push("\n")},window.videojs.m3u8={LineStream:n,ParseStream:a,Parser:o}}(window.videojs,window.parseInt,window.isFinite,window.videojs.mergeOptions),function(e,t){"use strict";var i,r,s,n,a,o=10;s=function(e,t){return e=isFinite(e)?e:1/0,t=isFinite(t)?t:1/0,Math.min(e,t)},n=function(e,t){return e=isFinite(e)?e:-(1/0),t=isFinite(t)?t:-(1/0),Math.max(e,t)},r=function(e,t){var i,r,s,n=0;if(void 0===t&&(t=e.mediaSequence+(e.segments||[]).length),0>t)return 0;if(r=e.targetDuration||o,s=t-e.mediaSequence,i=e.segments[s],i&&void 0!==i.start)return i.start;for(;s--;){if(i=e.segments[s],void 0!==i.end)return n+i.end;if(n+=i.duration||r,void 0!==i.start)return n+i.start}return n},i=function(t,i,s){if(!t)return 0;if(void 0===s&&(s=!0),void 0===i){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return r(t,i,s)},a=function(e){var s,n;return e.segments?e.endList?t.createTimeRange(0,i(e)):(s=r(e,e.mediaSequence),n=r(e,e.mediaSequence+e.segments.length),n-=3*(e.targetDuration||o),n=Math.max(0,n),t.createTimeRange(s,n)):t.createTimeRange()},t.Hls.Playlist={duration:i,seekable:a}}(window,window.videojs),function(e,t){"use strict";var i=t.Hls.resolveUrl,r=t.Hls.xhr,s=t.mergeOptions,n=function(e,t){var i,r,n=!1,o=s(e,{});for(i=e.playlists.length;i--;)if(r=o.playlists[i],console.log("url ===",r.uri===t.uri),r.uri===t.uri){if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.mediaSequence===t.mediaSequence){console.log("updateMaster continue");continue}o.playlists[i]=s(r,t),o.playlists[t.uri]=o.playlists[i],r.segments&&(o.playlists[i].segments=a(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),n=!0}return n?o:null},a=function(e,t,i){console.log(e,t,i);for(var r=-1,s=0,n=t.length;n>s;s++){for(var a=!1,o=e.length-1;o>0;o--)if(t[s].uri===e[o].uri){a=!0;break}if(a===!1){r=s;break}}if(r>-1)for(var s=r;s<t.length;s++)e.push(t[s]);return e},o=function(s,a){var u,d,h,f,l=this;if(o.prototype.init.call(this),!s)throw new Error("A non-empty playlist URL is required");f=function(i,r,s){var a,o,u;return l.setBandwidth(h||r),h=null,i?(l.error={status:r.status,message:"HLS playlist request error at URL: "+s,responseText:r.responseText,code:r.status>=500?4:2},console.log("error",i,r),l.trigger("error")):(l.state="HAVE_METADATA",a=new t.m3u8.Parser,a.push(r.responseText),a.end(),a.manifest.uri=s,u=n(l.master,a.manifest),o=1e3*(a.manifest.targetDuration||10),u?(l.master=u,l.updateMediaPlaylist_(a.manifest)):o/=2,l.media().endList||(e.clearTimeout(d),d=e.setTimeout(function(){l.trigger("mediaupdatetimeout")},o)),void l.trigger("loadedplaylist"))},l.state="HAVE_NOTHING",u=this.dispose,l.dispose=function(){h&&(h.onreadystatechange=null,h.abort(),h=null),e.clearTimeout(d),u.call(this)},l.media=function(e){var t,s=l.state;if(!e)return l.media_;if("HAVE_NOTHING"===l.state)throw new Error("Cannot switch media playlist from "+l.state);if("string"==typeof e){if(!l.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=l.master.playlists[e]}if(t=!l.media_||e.uri!==l.media_.uri,l.master.playlists[e.uri].endList)return h&&(h.onreadystatechange=null,h.abort(),h=null),l.state="HAVE_METADATA",l.media_=e,void(t&&l.trigger("mediachange"));if(t){if(l.state="SWITCHING_MEDIA",h){if(i(l.master.uri,e.uri)===h.url)return;h.onreadystatechange=null,h.abort(),h=null}h=r({uri:i(l.master.uri,e.uri),withCredentials:a},function(t,i){f(t,i,e.uri),t||("HAVE_MASTER"===s?l.trigger("loadedmetadata"):l.trigger("mediachange"))})}},l.setBandwidth=function(e){l.bandwidth=e.bandwidth},l.on("mediaupdatetimeout",function(){"HAVE_METADATA"===l.state&&(l.state="HAVE_CURRENT_METADATA",h=r({uri:i(l.master.uri,l.media().uri),withCredentials:a,timeout:5e3},function(e,t){f(e,t,l.media().uri)}))}),h=r({uri:s,withCredentials:a},function(i,r){var n,a;if(h=null,i)return l.error={status:r.status,message:"HLS playlist request error at URL: "+s,responseText:r.responseText,code:2},l.trigger("error");if(n=new t.m3u8.Parser,n.push(r.responseText),n.end(),l.state="HAVE_MASTER",n.manifest.uri=s,n.manifest.playlists){for(l.master=n.manifest,a=l.master.playlists.length;a--;)l.master.playlists[l.master.playlists[a].uri]=l.master.playlists[a];return l.trigger("loadedplaylist"),void(h||l.media(n.manifest.playlists[0]))}return l.master={uri:e.location.href,playlists:[{uri:s}]},l.master.playlists[s]=l.master.playlists[0],f(null,r,s),l.trigger("loadedmetadata")})};o.prototype=new t.Hls.Stream,o.prototype.updateMediaPlaylist_=function(e){this.media_=this.master.playlists[e.uri]},o.prototype.getMediaIndexForTime_=function(e){var t,i,r,s;if(!this.media_)return 0;if(0>e)return 0;for(s=this.media_.targetDuration||10,t=this.media_.segments.length;t--;)if(r=this.media_.segments[t],r&&(0!==t&&r&&delete r.end,void 0!==r.end&&r.end<=e&&void 0===r.start&&!(r.start&&r.end>r.start))){e-=r.end;break}for(t++,i=t;i<this.media_.segments.length;i++)if(r=this.media_.segments[i],e-=r.duration||s,0>e)return i;return this.media_.segments.length-1},t.Hls.PlaylistLoader=o}(window,window.videojs),function e(t,i,r){function s(a,o){if(!i[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return s(i?i:e)},d,d.exports,e,t,i,r)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,i){(function(t){t.window.pkcs7={unpad:e("./unpad")}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./unpad":2}],2:[function(e,t,i){"use strict";t.exports=function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}]},{},[1]),function(e,t,i){"use strict";var r,s,n,a,o;o=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},r=function(e){this._precompute();var t,i,r,s,n,a=this._tables[0][4],o=this._tables[1],u=e.length,d=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(s=e.slice(0),n=[],this._key=[s,n],t=u;4*u+28>t;t++)r=s[t-1],(t%u===0||8===u&&t%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],t%u===0&&(r=r<<8^r>>>24^d<<24,d=d<<1^283*(d>>7))),s[t]=s[t-u]^r;for(i=0;t;i++,t--)r=s[3&i?t:t-4],4>=t||4>i?n[i]=r:n[i]=o[0][a[r>>>24]]^o[1][a[r>>16&255]]^o[2][a[r>>8&255]]^o[3][a[255&r]]},r.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,i,r,s,n,a,o,u,d=this._tables[0],h=this._tables[1],f=d[4],l=h[4],c=[],p=[];for(e=0;256>e;e++)p[(c[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!f[t];t^=r||1,i=p[i]||1)for(a=i^i<<1^i<<2^i<<3^i<<4,a=a>>8^255&a^99,f[t]=a,l[a]=t,n=c[s=c[r=c[t]]],u=16843009*n^65537*s^257*r^16843008*t,o=257*c[a]^16843008*a,e=0;4>e;e++)d[e][t]=o=o<<24^o>>>8,h[e][a]=u=u<<24^u>>>8;for(e=0;5>e;e++)d[e]=d[e].slice(0),h[e]=h[e].slice(0)},decrypt:function(e,t,i,r,s,n){var a,o,u,d,h=this._key[1],f=e^h[0],l=r^h[1],c=i^h[2],p=t^h[3],g=h.length/4-2,m=4,y=this._tables[1],_=y[0],v=y[1],b=y[2],S=y[3],T=y[4];for(d=0;g>d;d++)a=_[f>>>24]^v[l>>16&255]^b[c>>8&255]^S[255&p]^h[m],o=_[l>>>24]^v[c>>16&255]^b[p>>8&255]^S[255&f]^h[m+1],u=_[c>>>24]^v[p>>16&255]^b[f>>8&255]^S[255&l]^h[m+2],p=_[p>>>24]^v[f>>16&255]^b[l>>8&255]^S[255&c]^h[m+3],m+=4,f=a,l=o,c=u;for(d=0;4>d;d++)s[(3&-d)+n]=T[f>>>24]<<24^T[l>>16&255]<<16^T[c>>8&255]<<8^T[255&p]^h[m++],a=f,f=l,l=c,c=p,p=a}},a=function(e,t,i){var s,n,a,u,d,h,f,l,c,p=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new r(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),y=new Int32Array(m.buffer);for(s=i[0],n=i[1],a=i[2],u=i[3],c=0;c<p.length;c+=4)d=o(p[c]),h=o(p[c+1]),f=o(p[c+2]),l=o(p[c+3]),g.decrypt(d,h,f,l,y,c),y[c]=o(y[c]^s),y[c+1]=o(y[c+1]^n),y[c+2]=o(y[c+2]^a),y[c+3]=o(y[c+3]^u),s=d,n=h,a=f,u=l;return m},s=function(){this.jobs=[],this.delay=1,this.timeout_=null},s.prototype=new t.Hls.Stream,s.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},s.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n=function(e,t,r,a){var u=n.STEP,d=new Int32Array(e.buffer),h=new Uint8Array(e.byteLength),f=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(d.subarray(f,f+u),t,r,h,f)),f=u;f<d.length;f+=u)r=new Uint32Array([o(d[f-4]),o(d[f-3]),o(d[f-2]),o(d[f-1])]),this.asyncStream_.push(this.decryptChunk_(d.subarray(f,f+u),t,r,h));this.asyncStream_.push(function(){a(null,i(h))})},n.prototype=new t.Hls.Stream,n.prototype.decryptChunk_=function(e,t,i,r){return function(){var s=a(e,t,i);r.set(s,e.byteOffset)}},n.STEP=32e3,t.Hls.decrypt=a,t.Hls.Decrypter=n,t.Hls.AsyncStream=s}(window,window.videojs,window.pkcs7.unpad),function(e){var t=function(e,t){return e.start(t)+"-"+e.end(t)},i={hexDump:function(e){for(var t,i,r=Array.prototype.slice.call(e),s=16,n=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},a=function(e){return e>=32&&126>e?String.fromCharCode(e):"."},o="",u=0;u<r.length/s;u++)t=r.slice(u*s,u*s+s).map(n).join(""),i=r.slice(u*s,u*s+s).map(a).join(""),o+=t+" "+i+"\n";return o},tagDump:function(e){return i.hexDump(e.bytes)},textRanges:function(e){var i,r="";for(i=0;i<e.length;i++)r+=t(e,i)+" ";return r}};e.videojs.Hls.utils=i}(this);